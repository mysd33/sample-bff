spring:    
  application:
    name: sample-bff
  profiles:
    active:
    - dev
    - log_default  #logging in default format
#    - log_container  #logging in json format
#    - xray  #X-Ray Enabled
  messages:
    basename: messages, messages-fw-common, messages-fw-web
  security:
    filter:
      dispatcher-types:
        - async
        - error
        - request        
        - forward 
  jackson:
    property-naming-strategy: SNAKE_CASE
# Resourceオブジェクトに存在しないフィールドがJSONに指定されていた場合、エラーとする
    deserialization:
      fail-on-unknown-properties: true
# Graceful Shutdown
  lifecycle:
    timeout-per-shutdown-phase: 20s
# Servicet File Upload Max Size
  servlet:
    multipart:
      file-size-threshold: 512KB
      max-file-size: 3MB
      max-request-size: 10MB
# Virtual Thread                  
  threads:
    virtual:
      enabled: true       

# Transaction Rollback
  transaction:
    rollback-on-commit-failure: true
# Dynamic Routing DataSource (disabled on Sample AP Default)
  datasource:
    dynamic-routing:
      enabled: false 
# HikariCP AutoCommit false
    hikari:
      auto-commit: false
# Dynamic Routing DataSource HikariCP AutoCommit false
    read:
      hikari:
        auto-commit: false
    write:
      hikari:
        auto-commit: false
# Spring Cloud for AWS Parameter Store Integration & Secrets Manager Integration
# Default Disabled For Local Development
  cloud:
    aws:
      parameterstore:
        enabled: false
      secretsmanager:
        enabled: false
  config:
    import: 
      - optional:aws-parameterstore:/config/common/;/config/${spring.application.name}/
      - optional:aws-secretsmanager:/secrets/database-secrets?prefix=spring.datasource.
      - optional:aws-secretsmanager:/secrets/database-secrets?prefix=spring.datasource.read.
      - optional:aws-secretsmanager:/secrets/database-secrets?prefix=spring.datasource.write.

# Spring Cloud for AWS Micrometer CloudWatch Metrics Integration Common Configuration
# Default Disabled For Local Development
management:
  cloudwatch:
    metrics:
      export:
        enabled: false
        namespace: ${spring.application.name}
        step: 10s

# Mybatis
mybatis:
  type-aliases-package: com.example.bff.domain.model, com.example.fw.web.token
  configuration:
    map-underscore-to-camel-case: true

# Spring Cloud Circuit Breaker TimeLimiter
resilience4j:
  timelimiter:
   configs:
     default:
       timeoutDuration: 3s

# Transaction Token Check 
transaction-token:
  store-type: db
#  store-type: session 
  path-partterns: /**
#  exclude-path-patterns:

# Pageation
pagination:
#  max-page-size: 100    
#  default-page: 0
  default-page-size: 5

# X-Ray SDK(not ADOT)
aws:
  xray:
    tracing-filter-name: ${spring.application.name}

# Tomcat Access Log
#logback:
#  access:
#    enabled: false

# 帳票出力機能の設定
#report:
# コンパイル済の様式ファイルを保管する一時ディレクトリを変更する場合に設定
#  jasper-file-tmpdir: jasper2
# PDFを一時保存するディレクトリを変更する場合に設定
#  report-tmpdir: pdf2
# PDFを一時保存するディレクトリを削除する間隔を変更する場合に設定
#  delete-tempfiles-initial-delay-seconds: 60
#  delete-tempfiles-fixed-rate-seconds: 60

# 鍵管理機能の設定
#keymanagement:
  # オブジェクトストレージで管理されているKMSの署名鍵の証明書
  # 開発時は自己署名証明書のpemファイルを使用するように設定している
#  cert-pem-file-name: self-certificate.pem

# 電子署名機能の設定
#digitalsignature:
#  visible: true
#  stamp-image-path: certs/stamp.png
# PKCS#12のキーストアを使用して基本署名を行う場合に設定
#  type: pkcs12-basic
# PKCS#12のキーストアを使用してPADES署名(PADES-B-B)を行う場合に設定
#  type: pkcs12-pades
#  pkcs12:
    # PKCS#12のキーストアファイル名(SHA256 WITH RSA)
#    keystore-file-path: certs/pkcs12/rsa/keystore.p12
    # PKCS#12のキーストアファイル名(SHA256 WITH ECDSA)
#    keystore-file-path: certs/pkcs12/ecdsa/keystore.p12
    # PKCS#12のキーストアパスワード
#    password: password123
# AWS KMSを使用してPADES署名(PADES-B-B)を行う場合に設定
#  type: aws-kms-pades
#  aws-kms:
    # AWS KMSのキーIDを設定
#    key-id: 713cdf19-8ad3-4659-be76-6547c0a65f7c